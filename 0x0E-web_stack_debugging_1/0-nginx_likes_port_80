#!/usr/bin/env bash
# configure a new bash file to listen at port 80
# Update package repositories
apt-get -y update

# Install Nginx
apt-get -y install nginx

# Check if Nginx is already running
service nginx status > /dev/null 2>&1
nginx_status=$?

if [ $nginx_status -eq 0 ]; then
  echo "Nginx is already running."
else
  # Update Nginx configuration
  sed -i 's/8080/80/g' /etc/nginx/sites-enabled/default

  # Allow incoming traffic on port 80
  ufw allow 'Nginx HTTP'

  # Restart Nginx
  service nginx restart
fi

